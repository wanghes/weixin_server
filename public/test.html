<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<title>测试微信jssdk功能</title>
	<script src="/wxJssdk/public/js/jquery.min.js"></script>
	<script src="/wxJssdk/public/js/jweixin-1.4.0.js"></script>
</head>

<body>
	<script type="text/javascript">
		// 请求签名
		$.ajax({
			url: "/jssdk",
			type: 'get',
			data: {
				url: location.href.split('#')[0]
			},
			success: function (res) {
				wx.config({
					debug: true,
					appId: res.data.appId,
					timestamp: res.data.timestamp,
					nonceStr: res.data.nonceStr,
					signature: res.data.signature,
					jsApiList: [
						'checkJsApi',
						'onMenuShareTimeline',
						'onMenuShareAppMessage',
						'onMenuShareQQ'
					]
				});
				wx.ready(function () {
					var shareData = {
						title: "123",
						desc: "123456",
						link: "https://www.baidu.com/",
						imgUrl: "http://admin.mousecloud.cn/upload/2018-02/big/big_3da3cf2687be88b62e4dc19a7058f6b2_e4d494ecc100da8c2715b5cebb228b70_3f50bbff80dfd97cec8501bfbba19620_haisong.jpg"
					};
					wx.onMenuShareAppMessage(shareData);
					wx.onMenuShareTimeline(shareData);
					wx.onMenuShareQQ(shareData);
				});
				wx.error(function (res) {
					alert(res.errMsg); // 正式环境记得关闭啊！！！！
				});
			}
		});
	</script>
</body>

</html>